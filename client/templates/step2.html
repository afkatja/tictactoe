<template name="step2">
  <h1>More boxes!</h1>
  <p>In this step, we will be creating more boxes for our gameboard.</p>
  <p>There is currently only one box on our gameboard. For tictactoe we need 9 of them. But we don't want to write 9 divs in our code, do we?</p>
  <p>To make 9 boxes, you need to use a javaascript <code>loop</code> in order to create a scalable application, like this:</p>
  {{#prism language="javascript" class="line-numbers" data-line="1-2, 4, 5"}}
  for(var i = 0; i &lt; 9; i++){
    //do something here
  }
  {{/prism}}
  <p>We need to make an <code>array</code> where we will insert our boxes. But in our case, because we are using Meteor, we will use something built in, which is called <code>Collection</code>. This will be the place to store all the boxes. Read more about Collections <a href="http://docs.meteor.com/#/full/mongo_collection">here</a></p>
  <pre>
    CollectionBoxes = new Mongo.Collection('boxes');
  </pre>
  <p>In the server code you can fill the collection. Add an object with a <code>boxIndex</code> to it:</p>
  {{#prism language="javascript" class="line-numbers" data-line="1-2, 4, 5"}}
    //fill 9 cells
    if(CollectionBoxes.find().count() === 0) {
      for(var i = 0; i &lt; 9; i++){
        CollectionBoxes.insert({boxIndex: i});
      }
    }
  {{/prism}}
  <p>We add the collection on the server code so that it is created only once. Read about Client and Server parts of Meteor application <a href="https://www.discovermeteor.com/blog/what-goes-where/">here</a>.
  The most part we will do today will be on the client.</p>
  <blockquote cite="http://meteortips.com/first-meteor-tutorial/templates/">
    When the code is executed on the server, a collection is created inside the Mongo database. This is where our data is stored. When the code is executed from inside the user’s web browser though — on the client-side — a local copy of that collection is created on that user’s computer. As a result, when the user interacts with the database, they’re actually interacting with their local copy. This is partly why Meteor applications are real-time by default. Data is manipulated on the user’s local machine and then invisibly synced in the background with the server-side database.
  </blockquote>
  <p>Try to log to console everytime you add a new item into the collection:</p>
  {{#prism language="javascript" class="line-numbers" data-line="1-2, 4, 5"}}
    console.log('inserted box with index', i);
  {{/prism}}
  <p>You can then open the browser's console by right clicking on the page and selecting <code>Inspect</code> - it looks like this: <img src="http://blog.teamtreehouse.com/wp-content/uploads/2014/01/dev-tools-console.png"></p>

  <p>So now you should have the following code running from your javascript file:</p>
  {{#prism language="javascript" class="line-numbers"}}
  //fill 9 cells
  if(CollectionBoxes.find().count() === 0) {
    for(var i = 0; i &lt; 9; i++){
      CollectionBoxes.insert({boxIndex: i});
      console.log('inserted box with index', i);
    }
  }
  {{/prism}}
  <p>In the following step, we will display the boxes we have just made, in our <code>html</code> file.</p>
</template>
